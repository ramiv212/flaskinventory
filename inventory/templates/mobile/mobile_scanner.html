{% extends 'mobile/base.html' %}

{% block title %}
Mobile Scanner
{% endblock %}

{% block content %}

<div id="reader" style="width: 100%"></div>


<!-- include the library -->
<script src="https://unpkg.com/html5-qrcode@2.0.9/dist/html5-qrcode.min.js"></script>


<script type="text/javascript">
function onScanSuccess(decodedText, decodedResult) {
    console.log(`Code scanned = ${decodedText}`, decodedResult);
    scanBarcode(decodedText)
}




	const html5QrCode = new Html5Qrcode(/* element id */ "reader");
	html5QrCode.start(
	  cameraId, 
	  {
	    fps: 10,    // Optional, frame per seconds for qr code scanning
	    qrbox: { width: 250, height: 250 },  // Optional, if you want bounded box UI
	    facingMode: "environment"
	  },
	  (decodedText, decodedResult) => {
	    // do something when code is read
	  },
	  (errorMessage) => {
	    // parse error, ignore it.
	  })
	.catch((err) => {
	  // Start failed, handle it.
	});

</script>


<script type="text/javascript">
	
	function scanBarcode(barcode){

	location.replace('/mobile/item/' + barcode);
    
  }

</script>


{% endblock %}
